"use strict";(self["webpackChunkreservation_frontend"]=self["webpackChunkreservation_frontend"]||[]).push([[943],{943:function(e,t,s){s.r(t),s.d(t,{default:function(){return j}});var n=s(641),l=s(33),o=s(751);const r=(0,n.Lk)("h1",null,"Welcome to eHomeAffairs - eBooking",-1),a=(0,n.Lk)("h3",{class:"mainBrwnTxt"},"Easy to use, convenient and just a click away",-1),i={class:"slightlyWhitenedBrownBg mx-3"},u={class:"row d-flex justify-content-evenly"},c={class:"col-12 col-sm-5 mx-1 mainBrwnBg"},h={class:"mainWhitishBg innerDiv"},d=(0,n.Fv)('<h5 class="text-start mx-2"> To register, <span class="mainBrwnTxt">use your ID number as the username.</span><br> A <span class="mainBrwnTxt">one-time-pin (OTP)</span> will be sent to your cellphone so please ensure you have your cellphone near you. <br> Please note: the <span class="mainBrwnTxt">number you use to register</span> is where any sms <span class="mainBrwnTxt">notifications</span> from the department will be sent to. </h5><br><h5 class="d-flex justify-content-start mx-2"> Username (ID number) </h5>',3),f=(0,n.Lk)("h5",{class:"d-flex justify-content-start mx-2 mt-3"},"firstName",-1),g=(0,n.Lk)("h5",{class:"d-flex justify-content-start mx-2 mt-3"},"lastName",-1),m=(0,n.Lk)("h5",{class:"d-flex justify-content-start mx-2 mt-3"},"Password",-1),k=(0,n.Lk)("br",null,null,-1),w=(0,n.Lk)("br",null,null,-1),p={class:"col-12 col-sm-5 mx-1 mainBrwnBg d-flex"},y={class:"mainWhitishBg innerDiv"},U=(0,n.Fv)('<h5 class="text-start mx-2"> To login, enter your username (ID number) and password. <br><span class="mainBrwnTxt">Register</span> if you do not have an account. <br> A <span class="mainBrwnTxt">one-time-pin (OTP)</span> will be sent to your cellphone so please ensure you have your cellphone near you. <br> Please note: you will receive the OTP via the <span class="mainBrwnTxt">number you used to register</span></h5><br><h5 class="d-flex justify-content-start mx-2"> Username (ID number) </h5>',3),x=(0,n.Lk)("h5",{class:"d-flex justify-content-start mx-2 mt-3"},"Password",-1),b=(0,n.Lk)("h5",{class:"d-flex justify-content-start mx-2 mt-3"},"OTP",-1),L=(0,n.Lk)("input",{class:"d-flex justify-content-start mx-2",type:"number",placeholder:"Enter cellphone number..."},null,-1),I=(0,n.Lk)("br",null,null,-1),v=(0,n.Lk)("h2",null,"View token assignment for users here",-1),D=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,"userID"),(0,n.Lk)("td",null,"token")])],-1),T=(0,n.Lk)("h2",null,"View basic info for existing users here",-1),B=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,"userID"),(0,n.Lk)("td",null,"firstName"),(0,n.Lk)("td",null,"lastName"),(0,n.Lk)("td",null,"txtPassword"),(0,n.Lk)("td",null,"hashedPassword")])],-1);function P(e,t,s,P,N,S){return(0,n.uX)(),(0,n.CE)("div",null,[r,a,(0,n.Lk)("h4",null,"login status = "+(0,l.v_)(N.loginStatus),1),(0,n.Lk)("div",i,[(0,n.Lk)("div",u,[(0,n.Lk)("div",c,[(0,n.Lk)("div",h,[d,(0,n.bo)((0,n.Lk)("input",{type:"number",placeholder:"Enter your ID number...","onUpdate:modelValue":t[0]||(t[0]=e=>N.newUserInfo.userID=e)},null,512),[[o.Jo,N.newUserInfo.userID]]),f,(0,n.bo)((0,n.Lk)("input",{type:"name",placeholder:"Enter cellphone number...","onUpdate:modelValue":t[1]||(t[1]=e=>N.newUserInfo.firstName=e)},null,512),[[o.Jo,N.newUserInfo.firstName]]),g,(0,n.bo)((0,n.Lk)("input",{type:"name",placeholder:"Enter cellphone number...","onUpdate:modelValue":t[2]||(t[2]=e=>N.newUserInfo.lastName=e)},null,512),[[o.Jo,N.newUserInfo.lastName]]),m,(0,n.bo)((0,n.Lk)("input",{type:"password",placeholder:"Enter password here...","onUpdate:modelValue":t[3]||(t[3]=e=>N.newUserInfo.txtPassword=e)},null,512),[[o.Jo,N.newUserInfo.txtPassword]]),k,w,(0,n.Lk)("button",{class:"my-3",onClick:t[4]||(t[4]=e=>S.registerNewUser())},"Register")])]),(0,n.Lk)("div",p,[(0,n.Lk)("div",y,[U,(0,n.bo)((0,n.Lk)("input",{type:"number",class:"d-flex justify-content-start mx-2",placeholder:"Enter your ID number...","onUpdate:modelValue":t[5]||(t[5]=e=>N.checkUserInfo.userID=e)},null,512),[[o.Jo,N.checkUserInfo.userID]]),x,(0,n.bo)((0,n.Lk)("input",{type:"password",class:"d-flex justify-content-start mx-2",placeholder:"Enter password here...","onUpdate:modelValue":t[6]||(t[6]=e=>N.checkUserInfo.txtPassword=e)},null,512),[[o.Jo,N.checkUserInfo.txtPassword]]),b,L,I,(0,n.Lk)("button",{class:"my-3",onClick:t[7]||(t[7]=e=>S.checkUser())},"Login")])])])]),v,(0,n.Lk)("table",null,[D,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.$store.state.allTheUsers,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.userID},[(0,n.Lk)("td",null,(0,l.v_)(e.userID),1),(0,n.Lk)("td",null,(0,l.v_)(e.token),1)])))),128))])]),T,(0,n.Lk)("table",null,[B,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(this.$store.state.allTheUsers,(e=>((0,n.uX)(),(0,n.CE)("tr",{key:e.userID},[(0,n.Lk)("td",null,(0,l.v_)(e.userID),1),(0,n.Lk)("td",null,(0,l.v_)(e.firstName),1),(0,n.Lk)("td",null,(0,l.v_)(e.lastName),1),(0,n.Lk)("td",null,(0,l.v_)(e.txtPassword),1),(0,n.Lk)("td",null,(0,l.v_)(e.hashedPassword),1)])))),128))])])])}var N={data(){return{newUserInfo:{userID:null,firstName:null,lastName:null,txtPassword:null},checkUserInfo:{userID:null,txtPassword:null},loginStatus:null}},methods:{async registerNewUser(){try{console.log("the register user method in the login page is running"),await this.$store.dispatch("registerUser",this.newUserInfo)}catch(e){console.log(`the following error was found while trying to register a new user in the login pg: ${e}`)}},async setFullCurrentUserDeets(e){console.log("The setFullCurrentUserDeets fx just started and immediately ran the getAUser fx of the store");let[t]=await this.$store.dispatch("getAUser",e);console.log("We are now back in the setFullCurrentUserDeets fx of the login pg"),console.log("Below is the variable/array returned after running the store fx"),console.log(t),console.log("the fullUserDeets will now be set to localStorage"),localStorage.setItem("fullUserDeets",JSON.stringify(t))},async setCurrentUserInfo(){try{console.log("The setCurrentUser to local storage fx is running now"),localStorage.setItem("currentUserInfo",JSON.stringify(this.checkUserInfo)),console.log("The setFullCurrentUserDeets fx just started and immediately ran the getAUser fx of the store");let[e]=await this.$store.dispatch("getAUser",this.checkUserInfo.userID);console.log("Below is the variable/array returned after running the getAUser store fx"),console.log(e),console.log("the fullUserDeets will now be set to localStorage"),localStorage.setItem("fullUserDeets",JSON.stringify(e))}catch(e){console.log(`The followinng error occured while trying to set the checkUser info (id number + txtPassword) as well as the fullUserDeets to the local storage: ${e}`)}},async checkUser(){try{console.log("the checkUser method in the login page is running");let e=await this.$store.dispatch("checkAUser",this.checkUserInfo);console.log("We're back in the checkUser fx of the loginPg. Below is the value of the checkTheUser.token variable (hopefully)"),console.log(e.token),console.log("Below is the checkTheuser.worked variable"),console.log(e.worked),console.log("below i'm setting the checkTheuser.token variable to local storage. hopefully it works"),localStorage.setItem("userToken",JSON.stringify(e.token)),console.log("Below I'm setting the checkTheuser.worked variable to local storage. Pray for me"),localStorage.setItem("checkUserStatus",JSON.stringify(e.worked)),await this.setCurrentUserInfo(),window.location.href="/"}catch(e){console.log(`the following error was found while trying to check user credentials in the login pg: ${e}`)}}},mounted(){try{this.$store.dispatch("getTheUsers")}catch(e){console.log(`the following error was found while trying to mount the user in the login pg: ${e}`)}try{this.loginStatus=JSON.parse(localStorage.getItem("checkUserStatus"))}catch(e){console.log(`The following error was found when getting the loginStatus at the mounted of the loginPg: ${e} `)}}},S=s(262);const C=(0,S.A)(N,[["render",P]]);var j=C}}]);
//# sourceMappingURL=943.1f3787b8.js.map